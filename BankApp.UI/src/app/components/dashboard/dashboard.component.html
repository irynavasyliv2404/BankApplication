<div *ngIf="user">
  <div>
    <h4 class="alert alert-default"> Hello <b>{{user.userName}}</b> your balance is: <b>{{user.balance | currency}}</b></h4>
    <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">

          <div class="panel-heading">
            <h3 class="panel-title">Make a transaction</h3>
          </div>
          <div class="panel-body align-content-center">
            <form class="form-inline" (submit)="makeTransaction()">
              <select name="type" [(ngModel)]="transaction.type" class="form-control form-elem">
                <option [ngValue]='0'>Deposit</option>
                <option [ngValue]='1'>Withdraw</option>
                <option [ngValue]='2'>Transfer</option>
            </select>
              <div class="form-group form-elem">
                <div class="input-group">
                  <span class="input-group-addon">$</span>
                  <input ng-required="transaction.amount" name="amount" [(ngModel)]="transaction.amount" type="number" step="0.01" min=0.01 [attr.max]="transaction.type == 0 ? null : user.balance" class="form-control" id="amount" placeholder="0.01" >
                </div>
              </div>
              <select name="receiverId" [(ngModel)]="transaction.receiverId" class="form-control form-elem" [attr.hidden]="transaction.type == 2 ? null : ''">
                <option [ngValue]='0' disabled>Select receiver</option>
                <option *ngFor="let transferReceiver of transferReceivers" [ngValue]="transferReceiver.userId">
                  {{transferReceiver.userName}}
                </option>
              </select>
              <button type="submit" class="btn btn-primary">Submit</button>
            </form>
          </div>
        </div>

        <h3>Your transactions</h3>
        <hr />
        <table class="table table-striped table-bordered table-condensed">
          <thead>
          <tr>
            <th>Sender</th>
            <th>Receiver</th>
            <th>Type</th>
            <th>Amount</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let transaction of user.transactions">
            <td>{{transaction.sender.userName}}</td>
            <td>{{transaction.receiver?.userName}}</td>
            <td>{{transaction.typeDescription}}</td>
            <td [ngClass]="(transaction.income==true)?'profit-elem':'loss-elem'">{{transaction.amount | currency}}</td>
          </tr>
          </tbody>

        </table>
      </div>
    </div>
  </div>
</div>
